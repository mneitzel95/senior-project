<!doctype html>
<html>
<head>

	<!-- <input type="file" accept="video/*;capture=camcorder">
	<input type="file" accept="audio/*;capture=microphone"> -->

	<!-- <device type="media" onchange="update(this.data)"></device>
	<video autoplay></video>
	<script>
  		function update(stream) {
    		document.querySelector('video').src = stream.url;
  		}
	</script>

	<script>
		function hasGetUserMedia() {
  			return !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia);
		}

		if (hasGetUserMedia()) {
		// Good to go!
		} else {
			alert('getUserMedia() is not supported by your browser');
		}
	</script> -->

	<!-- <video autoplay></video>

	<script>
		const constraints = {
			video: true
		};
		
		const video = document.querySelector('video');

		navigator.mediaDevices.getUserMedia(constraints).
		then((stream) => {video.srcObject = stream});

		const hdConstraints = {
			video: {width: {min: 1280}, height: {min: 720}}
		};

		navigator.mediaDevices.getUserMedia(hdConstraints).
		then((stream) => {video.srcObject = stream});

		const vgaConstraints = {
			video: {width: {exact: 640}, height: {exact: 480}}
		};

		navigator.mediaDevices.getUserMedia(vgaConstraints).
		then((stream) => {video.srcObject = stream});
	</script>

	<script>
		const hdConstraints = {
			video: {width: {min: 1280}, height: {min: 720}}
		};

		navigator.mediaDevices.getUserMedia(hdConstraints).
		then((stream) => {video.srcObject = stream});

		const vgaConstraints = {
			video: {width: {exact: 640}, height: {exact: 480}}
		};

		navigator.mediaDevices.getUserMedia(vgaConstraints).
		then((stream) => {video.srcObject = stream});
	</script> -->
	
	<!-- <input type="file" accept="video/*" capture="camera" id="recorder"> -->
		<video id="player" controls></video>
		<script>
  			var recorder = document.getElementById('recorder');
  			var player = document.getElementById('player');

  			recorder.addEventListener('change', function(e) {
    			var file = e.target.files[0];
    			// Do something with the video file.
    			player.src = URL.createObjectURL(file);
  			});
		</script>
		<!--
		<video id="player" controls></video>
		<script>
			var player = document.getElementById('player');
			var handleSuccess = function(stream) {
				player.srcObject = stream;
			};
			navigator.mediaDevices.getUserMedia({ audio: true, video: true })
			.then(handleSuccess)
		</script>

		<a id="download">Download
		<button id="stop">Stop
		<script>
	 		let shouldStop = false;
	  		let stopped = false;
	  		const downloadLink = document.getElementById('download');
	  		const stopButton = document.getElementById('stop');
	  		stopButton.addEventListener('click', function() {
				shouldStop = true;
	  		})
	  		var handleSuccess = function(stream) {
				const options = {mimeType: 'video/webm'};
				const recordedChunks = [];
				const mediaRecorder = new MediaRecorder(stream, options);
			mediaRecorder.addEventListener('dataavailable', function(e) {
		  		if (e.data.size > 0) {
					recordedChunks.push(e.data);
		  		}
		  		if(shouldStop === true && stopped === false) {
					mediaRecorder.stop();
					stopped = true;
		  		}
			});
			mediaRecorder.addEventListener('stop', function() {
				downloadLink.href = URL.createObjectURL(new Blob(recordedChunks));
		  		downloadLink.download = 'acetest.webm';
			});
			mediaRecorder.start();
			};
	  		navigator.mediaDevices.getUserMedia({ audio: true, video: true })
			.then(handleSuccess);
		</script>
		-->
</head>
